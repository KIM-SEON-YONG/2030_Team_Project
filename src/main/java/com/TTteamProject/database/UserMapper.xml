<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.TTteamProject.database.UserMapper">

	<!-- join mapper.xml -->
	<insert id="joinList"
		parameterType="com.TTteamProject.model.UserDTO">
		INSERT INTO TB_USER (
		USER_ID, USER_PW, USER_NAME,
		USER_BIRTHDATE, USER_GENDER, USER_PHONE,
		FAV_WELFARE, FAV_REGION,
		JOIN_DT
		)
		VALUES (
		#{user_id}, #{user_pw}, #{user_name},
		#{user_birthdate}, #{user_gender},
		#{user_phone}, #{fav_welfare},
		#{fav_region}, CURRENT_TIMESTAMP
		)
	</insert>



	<!-- Login mapper.xml -->
	<select id="login"
		parameterType="com.TTteamProject.model.UserDTO"
		resultType="com.TTteamProject.model.UserDTO">
		SELECT * FROM TB_USER
		WHERE USER_ID=#{user_id} AND
		USER_PW=#{user_pw}
	</select>


	<!-- id중복 확인 -->
	<select id="checkId"
		resultType="com.TTteamProject.model.UserDTO" parameterType="String">
		SELECT *
		FROM TB_USER
		WHERE USER_ID = #{user_id}
	</select>

	<!-- id단일 체크(로그인할때) 확인 -->
	<select id="loginCheck"
		resultType="com.TTteamProject.model.UserDTO" parameterType="String">
		SELECT *
		FROM TB_USER
		WHERE USER_ID = #{user_id}
	</select>

	<!-- 회원정보 수정 -->
	<update id="updateUser"
		parameterType="com.TTteamProject.model.UserDTO">
		UPDATE TB_USER
		SET
       		USER_PW = #{user_pw},
	        USER_PHONE = #{user_phone},
	        FAV_WELFARE = #{fav_welfare},
	        FAV_REGION = #{fav_region}
		WHERE USER_ID = #{user_id}
	</update>

	<!-- 로그인시 DB데이터 가져오기 -->
	<select id="getUserInfo" parameterType="String"
		resultType="com.TTteamProject.model.UserDTO">
		SELECT USER_ID, USER_PW, USER_NAME
		FROM TB_USER
		WHERE USER_ID = #{user_id}
	</select>







</mapper>