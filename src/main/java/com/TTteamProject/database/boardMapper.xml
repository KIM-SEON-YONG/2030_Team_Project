<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.TTteamProject.database.boardMapper">
	<!-- 게시글 목록 조회 예시 -->
	<select id="boardList"
		resultType="com.TTteamProject.model.BoardDTO">
		SELECT B_IDX, B_CATEGORY, B_TITLE, USER_ID, CREATE_DT
		FROM
		TB_BOARD
		ORDER BY B_IDX DESC
	</select>

	<!-- 게시글 단건 조회 -->
	<select id="selectOneboard" parameterType="int"
		resultType="com.TTteamProject.model.BoardDTO">
		SELECT B_IDX, B_TITLE, B_CONTENT, TO_CHAR(CREATE_DT, 'YYYY-MM-DD HH24:MI:SS') AS CREATE_DT
		FROM TB_BOARD
		WHERE B_IDX = #{b_idx}
	</select>

	<!-- 삽입 -->
	<insert id="insertAllboard"
		parameterType="com.TTteamProject.model.BoardDTO">
		INSERT INTO TB_BOARD (B_IDX, B_TITLE, B_CONTENT, CREATE_DT, B_VIEWS,
		B_LIKES, USER_ID, B_CATEGORY)
		VALUES (TB_BOARD_SEQ.NEXTVAL, #{b_title}, #{b_content}, TO_DATE(SYSDATE,
		'YYYY-MM-DD HH24:MI:SS'), 0, 0, #{user_id}, #{b_category})

	</insert>

	<!-- 사용자별 게시글 목록 조회 -->
    <select id="getUserBoards" parameterType="String" resultType="com.TTteamProject.model.BoardDTO">
        SELECT * FROM TB_BOARD WHERE user_id = #{userId}
    </select>
    
    <!-- 사용자 게시글 조회 -->
    <select id="getPostCountByUserId" resultType="int">
        SELECT COUNT(*) FROM TB_BOARD WHERE user_id = #{userId}
    </select>







</mapper>